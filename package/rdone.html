<!DOCTYPE html>
<html>
<head>
<script type="text/javascript">var _speedMark = new Date();</script>
<title>SmartHost</title>
<meta charset="gb2312" />
<meta http-equiv="content-type" content="text/html; charset=GB2312"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
<meta name="author" content="mooringniu" />
<meta name="url" content="http://code.google.com/p/smarthost" />
<meta name="description" content="SmartHost A Remote IP/Host Remap Plugin for Fiddler" />
<style type="text/css">
body{
    margin:0px;padding:0px;
    line-height:1.6em;
    font-size:1.3em;
    font-weight:600;
    text-align:center;
    text-decoration:none;
    max-width:device-width;min-width:320px;
}
h1{margin:0;}
button{ width:90%; line-height:1.2em;font-size:1.2em;margin-bottom:0.6em;}
</style>
</head>
<body>
<h1>Done</h1>
<hr/>
<span id="remoteProxy"></span>
<span holder></span>
<button onclick="goBack();return false;" href="javascript:void(0);">GO BACK</button>
<script type="text/javascript">
var sLocal = ('localStorage' in window);
function goBack(){
    location.href = '/remote.html'+location.search;
}
function splitQueryString(str){
    var strArr = str.split(/&+/gi),obj = {};
    for(var i=0,il=strArr.length; i<il; i++){
        var sp = strArr[i].split(/=+/gi);
        if(sp.length==2){
            try{obj[sp[0]] = decodeURIComponent(sp[1]); }catch(e){};
        }
    }
    return obj;
}
function getCookie(key){
    var str = document.cookie,
        cookies = str.split(/;\s*/gi),
        ckObj = {};
    for(var i =0,il=cookies.length; i<il; i++){
        var t = cookies[i].split('=');
        if(t[0] == key){
            return t[1];
        }
    }
}
function get(key){
    return localStorage.getItem(key)||getCookie(key);
}
(function(){
    var search = location.search.length>1?location.search.substr(1):'',
        gQuery = splitQueryString(search),
        ip = get('remoteProxy'),
        model = get('mode');
    if(!ip){
        var cookie = document.cookie.split('; ');
        for(var i=0,il=cookie.length;i<il;i++){
            var tmp = cookie[i].split('=');
            if(tmp.length==2&&tmp[0]=='remoteProxy'){
                ip = decodeURIComponent(tmp[1]);
                break;
            }
        }
    }
    if(model == 'remote'){
        if(ip){
            document.getElementById('remoteProxy').innerHTML = 'Remote Proxy Mode has been set. All requests from this device will be sent to '+ip+'.';
        }else{
            document.getElementById('remoteProxy').innerHTML = 'Remote Proxy Mode has been set. All requests from this device will be sent to it.';
        }
    }else{
        document.getElementById('remoteProxy').innerHTML = 'All IP/host maps have been cleaned.';
    }
})();
</script>
<script type="text/javascript" src="http://tajs.qq.com/stats?sId=28971616" charset="UTF-8"></script>
<script type="text/javascript" src="share.js" charset="utf-8"></script>
</body>
</html>
